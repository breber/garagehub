{% extends 'base.html' %}
{% block externalcss %}
<link rel="stylesheet" href="/static/css/dataTables.bootstrap.min.css" type="text/css"/>
{% endblock %}
{% block content %}

<div class="row">
  <div class="col-lg-10">
    <h2>Notifications</h2>
  </div>
  <div class="col-lg-2">
    <a class="btn btn-primary btn-block" href="/notifications/add"><i class="glyphicon glyphicon-plus"></i> Add Notification</a>
    <a id="notif-deleteButton" class="btn btn-danger btn-block"><i class="glyphicon glyphicon-remove"></i> Delete Notification</a>
  </div>
</div>
<br>
<div class="row">
  <div class="col-lg-12">
    <table id="notif-datatable" class="table table-striped table-bordered table-hover dataTable DTTT_selectable">
      <thead>
        <tr>
          <th>Vehicle</th>
          <th>Category</th>
          <th>Frequency</th>
          <th>Next Deadline</th>
        </tr>
      </thead>
      {% if notifications %}
      {% for notif in notifications %}
      <tr id="{{ notif.key.id() }}">
        <td>{{ notif.get_vehicle().name() }}</td>
        <td>{{ notif.get_category().name() }}</td>
        <td>
        {% if notif.recurring %}
        {% if notif.dateBased %}
        <span>Every {{ notif.recurringMonths }} Months</span>
        {% if notif.mileBased %}
        <span> or </span>
        {% endif %}
        {% endif %}
        {% if notif.mileBased %}
        <span>Every {{ notif.recurringMiles }} Miles</span>
        {% endif %}

        {% else %}
        One-Time
        {% endif %}
        </td>
        <td>
        {% if notif.dateBased %}
        <span>{{ notif.date }}</span>
        {% if notif.mileBased %}
        <span> or </span>
        {% endif %}
        {% endif %}
        {% if notif.mileBased %}
        <span>{{ notif.mileage }} Miles</span>
        {% endif %}
        </td>
      </tr>
      {% endfor %}
      {% endif %}
    </table>
  </div>
</div>

{% endblock %}
{% block externaljs %}
<script type="text/javascript" src="/static/js/ext/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="/static/js/ext/dataTables.bootstrap.min.js"></script>
<script type="text/javascript" src="/static/js/notifications.js"></script>
{% endblock %}
