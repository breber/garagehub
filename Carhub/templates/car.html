{% extends 'base_vehicle.html' %} 
{% block pagecontent %}

<div class="row-fluid">
  <div class="span9">
    <h2>{{ car.name }}</h2>
  </div>
  <div class="span3">
    <div class="row-fluid">
      <a href="#editCar" class="btn btn-inverse span12" data-toggle="modal"><i class="icon-edit icon-white"></i> Edit Vehicle</a>
    </div>
  </div>
</div>

<table id="cartable" class="table cartable">
  <tr class="hidden"><td></td><td></td></tr>
  <tr>
    <td>Color</td>
    <td class="editable">{% if car.color %}{{ car.color }}{% else %}N/A{% endif %}</td>
  </tr>
  <tr>
    <td>License Plates</td>
    <td class="editable">{% if car.plates %}{{ car.plates }}{% else %}N/A{% endif %}</td>
  </tr>
  <tr>
    <td>Current Odometer</td>
    <td>{{ latestMilage }}</td>
  </tr>
  <tr>
    <td>Total Cost</td>
    <td>${{ totalCost }}</td>
  </tr>
</table>

<div id="editCar" class="modal hide fade">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">x</button>
    <h3>Update Vehicle</h3>
  </div>
  <div class="modal-body">
    <form action="/vehicle/{{ car.key.id }}/update" method="post" id="saveForm">
      <div>
        <label for="color">Color:</label>
        <input id="color" type="text" name="color" value="{% if car.color %}{{ car.color }}{% endif %}" /> 
      </div>
      <div>
        <label for="plates">License Plates:</label>
        <input id="plates" type="text" name="plates" value="{% if car.plates %}{{ car.plates }}{% endif %}" /> 
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <form action="/vehicle/{{ car.key.id }}/delete" method="post" id="deleteForm" class="hidden"></form>
    <input type="submit" class="btn btn-danger" value="Delete" form="deleteForm"></input>
    <a href="#" class="btn btn-inverse" data-dismiss="modal">Close</a>
    <input type="submit" class="btn btn-primary" autofocus="autofocus" form="saveForm"></input>
  </div>
</div>

{% endblock %}
