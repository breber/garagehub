{% extends 'base.html' %} {% block externalcss %}
<link rel="stylesheet" href="/static/css/dataTables.bootstrap.css"
  type="text/css" />
{% endblock %} {% block content %}

<div class="well">
  <h2>Nearby Gas Prices</h2>

  <div class="row">
    <div class="col-lg-12">
      <label class="checkbox">
        <input type="checkbox" id="location" name="location" value="location" checked /> Detect my location
      </label>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-3">
      <div class="form-group">
        <label for="zip">Zip Code:</label>
        <input type="number" class="form-control" name="zip" id="zip" disabled />
      </div>
    </div>
    <div class="col-lg-3">
      <div class="form-group">
        <label for="radius">Search Radius:</label>
        <select name="radius" class="form-control" id="radius">
          <option value="1">1 Mile</option>
          <option value="2">2 Miles</option>
          <option value="3">3 Miles</option>
          <option value="4">4 Miles</option>
          <option SELECTED value="5">5 Miles</option>
          <option value="6">6 Miles</option>
          <option value="7">7 Miles</option>
          <option value="8">8 Miles</option>
          <option value="9">9 Miles</option>
          <option value="10">10 Miles</option>
          <option value="15">15 Miles</option>
          <option value="20">20 Miles</option>
          <option value="25">25 Miles</option>
          <option value="30">30 Miles</option>
        </select>
      </div>
    </div>
    <div class="col-lg-3">
      <div class="form-group">
        <label for="grade">Fuel Grade:</label>
        <select name="grade" class="form-control" id="grade">
          <option value="reg">Regular</option>
          <option value="mid">Mid</option>
          <option value="pre">Premium</option>
          <option value="diesel">Diesel</option>
        </select>
      </div>
    </div>
    <div class="col-lg-3">
      <div class="form-group">
        <label for="sort">Sort By:</label>
        <select name="sort" class="form-control" id="sort">
          <option value="price">Price</option>
          <option value="distance">Distance</option>
        </select>
      </div>
    </div>
  </div>
  <div class="row">
    <div id="alert" class="col-lg-10"></div>
    <div class="col-lg-2">
      <input type="button" class="btn btn-primary col-lg-12 pull-right" id="fetchPrices" value="Get Gas" />
    </div>
  </div>

  <div class="row" id="tableWrapper">
    <div id="loading" class="center"><img id='theImg' src='/static/img/ajax-loader.gif' class="loading-image" /> Loading...</div>
    <table class="table table-striped table-bordered table-hover hidden"
      id="gaspricetable">
      <thead>
        <tr>
          <th>Name</th>
          <th>Location</th>
          <th>Price</th>
          <th>Distance</th>
          <th>Last Updated</th>
          <th>Latitude</th>
          <th>Longitude</th>
        </tr>
      </thead>
    </table>
  </div>
  <hr>
  <div class="row">
    <div class="col-lg-4 col-offset-8">
      <span class="pull-right">Data Powered by www.myGasFeed.com.</span>
    </div>
  </div>


  <div id="modalMap" class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">x</button>
          <h3 id="stationNameModal"></h3>
        </div>
        <div class="modal-body">
          <div id="map_canvas" class="gas-map-canvas"></div>
        </div>
        <div class="modal-footer">
          <a href="#" class="btn btn-default" data-dismiss="modal">Close</a>
          <!-- TODO add this back in for price update -->
          <!-- <input type="button" class="btn btn-primary" autofocus="autofocus" id="priceUpdate" data-dismiss="modal" value="Update Price"></input> -->
          {% if user %}
            <input type="button" class="btn btn-primary" autofocus="autofocus" id="saveAsFavorite" value="Set As Favorite"></input>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  <div id="modalPriceUpdate" class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">x</button>
          <h3 id="stationNamePriceModal"></h3>
        </div>
        <div class="modal-body">
          <label for="grade">Fuel Grade:</label>
          <select name="updateGrade" id="updateGrade" >
            <option value="reg">Regular</option>
            <option value="mid">Mid</option>
            <option value="pre">Premium</option>
            <option value="diesel">Diesel</option>
          </select>
          <label for="Price">New Price:</label>
          <input id="price-input" type=text value=""/>
        </div>
        <div class="modal-footer">
          <a href="#" class="btn btn-default" id="priceUpdateClose" data-dismiss="modal">Close</a>
          <input type="button" class="btn btn-primary" autofocus="autofocus" id="priceUpdateSubmit" value="Submit"></input>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %} {% block externaljs %}
<script type="text/javascript"
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC-aGrYEme0_wLGC8x6EAnIG5Ip_Du0c7o&sensor=false"></script>
<script type="text/javascript"
  src="/static/js/ext/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="/static/js/ext/sprintf.js"></script>
<script type="text/javascript" src="/static/js/gasprices.js"></script>

{% endblock %}
