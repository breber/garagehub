{% extends 'base.html' %} {% block externalcss %}
<link rel="stylesheet" href="/static/css/dataTables.bootstrap.css"
  type="text/css" />
{% endblock %} {% block content %}

<div class="well">
  <h2>Nearby Gas Prices</h2>

  <label class="checkbox">
    <input type="checkbox" id="location" name="location" value="location" checked /> Detect my location
  </label>

  <div class="row-fluid">
    <div class="span3">
      <label for="zip">Zip Code:</label>
      <input type="number" name="zip" id="zip" class="span12" disabled />
    </div>
    <div class="span3">
      <label for="radius">Search Radius:</label>
      <select name="radius" id="radius" class="span12">
        <option value="1">1 Mile</option>
        <option value="2">2 Miles</option>
        <option value="3">3 Miles</option>
        <option value="4">4 Miles</option>
        <option SELECTED value="5">5 Miles</option>
        <option value="6">6 Miles</option>
        <option value="7">7 Miles</option>
        <option value="8">8 Miles</option>
        <option value="9">9 Miles</option>
        <option value="10">10 Miles</option>
        <option value="15">15 Miles</option>
        <option value="20">20 Miles</option>
        <option value="25">25 Miles</option>
        <option value="30">30 Miles</option>
      </select>
    </div>
    <div class="span3">
      <label for="grade">Fuel Grade:</label>
      <select name="grade" id="grade" class="span12">
        <option value="reg">Regular</option>
        <option value="mid">Mid</option>
        <option value="pre">Premium</option>
        <option value="diesel">Diesel</option>
      </select>
    </div>
    <div class="span3">
      <label for="sort">Sort By:</label>
      <select name="sort" id="sort" class="span12">
        <option value="price">Price</option>
        <option value="distance">Distance</option>
      </select>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span10">
      <div id="alert" class="span12"></div>
    </div>
    <div class="span2">
      <input type="button" class="btn btn-primary span12" id="fetchPrices" value="Get Gas" />
    </div>
  </div>

  <div class="row-fluid" id="tableWrapper">
    <div id="loading" class="center"><img id='theImg' src='/static/img/ajax-loader.gif' class="loading-image" /> Loading...</div>
    <table class="table table-striped table-bordered table-hover hidden"
      id="gaspricetable">
      <thead>
        <tr>
          <th>Name</th>
          <th>Location</th>
          <th>Price</th>
          <th>Distance</th>
          <th>Last Updated</th>
          <th>Latitude</th>
          <th>Longitude</th>
          <th>Id</th>
        </tr>
      </thead>
    </table>
  </div>

  <hr>

  <div class="row-fluid">
    <div class="span4 offset8">
      <span class="pull-right">Data Powered by www.myGasFeed.com.</span>
    </div>
  </div>

  <div id="modalMap" class="modal hide fade">
  	<div class="modal-header">
	  <button type="button" class="close" data-dismiss="modal">x</button>      
      <h3 id="stationNameModal"></h3>
    </div>
    <div id="map_canvas" class="gas-map-canvas"></div>
    <div id="hiddenId" style="display: none;"></div>
    <br/>
    <div class="modal-footer">
      <a href="#" class="btn" data-dismiss="modal">Close</a>
<!--       TODO add this back in for price update -->
<!--       <input type="button" class="btn btn-primary" autofocus="autofocus" id="priceUpdate" data-dismiss="modal" value="Update Price"></input> -->
      {% if user %}
      	<input type="button" class="btn btn-primary" autofocus="autofocus" id="saveAsFavorite" value="Set As Favorite"></input>
      {% endif %}
    </div>
    
  </div>
  
  <div id="modalPriceUpdate" class="modal hide fade">
  	<div class="modal-header">
  		<button type="button" class="close" data-dismiss="modal">x</button>      
      	<h3 id="stationNamePriceModal"></h3>
  		<br/>
  		<label for="grade">Fuel Grade:</label>
        <select name="updateGrade" id="updateGrade" >
          <option value="reg">Regular</option>
          <option value="mid">Mid</option>
          <option value="pre">Premium</option>
          <option value="diesel">Diesel</option>
        </select>
       	<label for="Price">New Price:</label>
     		<input id="price-input" type=text value=""/>
       </div>
       <div class="modal-footer">
      <a href="#" class="btn" id="priceUpdateClose" data-dismiss="modal">Close</a>
      <input type="button" class="btn btn-primary" autofocus="autofocus" id="priceUpdateSubmit" value="Submit"></input>
    </div>
  </div>
</div>

{% endblock %} {% block externaljs %}
<script type="text/javascript"
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC-aGrYEme0_wLGC8x6EAnIG5Ip_Du0c7o&sensor=false"></script>
<script type="text/javascript"
  src="/static/js/ext/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="/static/js/ext/sprintf.js"></script>
<script type="text/javascript" src="/static/js/gasprices.js"></script>

{% endblock %}
